{% extends "base.html" %}
{% block content %}
<main role="main" class="container py-4">
  <h1>Crear artículo</h1>

  <!-- Tabs de Bootstrap -->
  <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" id="informacion-tab" data-bs-toggle="tab" href="#informacion" role="tab" aria-controls="informacion" aria-selected="true">Información</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="cuerpo-tab" data-bs-toggle="tab" href="#cuerpo" role="tab" aria-controls="cuerpo" aria-selected="false">Cuerpo</a>
    </li>
  </ul>

  <!-- Tab Content -->
  <div class="tab-content" id="myTabContent">
    <!-- Información Tab -->
    <div class="tab-pane fade show active" id="informacion" role="tabpanel" aria-labelledby="informacion-tab">
      <form method="post" enctype="multipart/form-data">  <!-- Added enctype for file uploads -->
        {% csrf_token %}
        <div class="py-3">
          <div class="form-group">
            <label for="id_title">Título</label>
            {{ info_form.title }}
          </div>
          <div class="form-group">
            <label for="id_title_tag">Etiqueta de título</label>
            {{ info_form.title_tag }}
          </div>
          <div class="form-group">
            <label for="id_summary">Resumen</label>
            {{ info_form.summary }}
          </div>
          <div class="form-group">
            <label for="id_category">Categoría</label>
            {{ info_form.category }}
          </div>
          <div class="form-group">
            <label for="id_keywords">Etiquetas</label>
            {{ info_form.keywords }}
          </div>
        </div>
    </div>

    <!-- Cuerpo Tab -->
    <div class="tab-pane fade" id="cuerpo" role="tabpanel" aria-labelledby="cuerpo-tab">
      <div class="py-3">
        <label for="id_body">Cuerpo del artículo</label>
        <div class="form-group">
          {{ body_form.media }}
          {{ body_form.body }}
        </div>
      </div>
    </div>
  </div>

  <!-- Submit Buttons -->
  <div class="py-3">
    <button class="btn btn-primary" type="submit">Guardar</button>
    <a href="{% url 'my-posts' %}" class="btn btn-secondary">Cancelar</a>
  </div>
  </form>
</main>

<!-- Bootstrap JavaScript for Tabs -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
    var triggerTabList = [].slice.call(document.querySelectorAll('#myTab a'))
    triggerTabList.forEach(function (triggerEl) {
      var tabTrigger = new bootstrap.Tab(triggerEl)

      triggerEl.addEventListener('click', function (event) {
        event.preventDefault()
        tabTrigger.show()
      })
    })
  });
</script>
{% endblock %}
