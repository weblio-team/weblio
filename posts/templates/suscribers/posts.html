{% extends "base.html" %}
{% block content %}
    <main class="container py-4">
        <h1>Posts</h1>
        <div class="row">
            <div class="col-md-9">
                {% for post in object_list %}
                <div class="card mb-3 w-100">
                    <div class="row g-0">
                        <div class="col-md-3">
                            <img src="https://via.placeholder.com/150" class="img-fluid rounded-start" alt="Placeholder Image" style="width: 100%;">
                        </div>
                        <div class="col-md-9">
                            <div class="card-body">
                                <h5 class="card-title"><a href="{% url 'post' post.pk post.category.name|slugify post.date_posted|date:'m' post.date_posted|date:'Y' post.title|slugify %}">{{ post.title }}</a></h5>
                                <p class="card-text">{{ post.summary|safe }}</p>
                                <p class="card-text"><small class="text-muted">Author {{ post.author.first_name }} {{ post.author.last_name }}</small></p>
                                <p class="card-text"><small class="text-muted">Category: {{ post.category }}</small></p>
                            </div>
                        </div>
                    </div>
                </div>
                {% empty %}
                    <p>No posts found.</p>
                {% endfor %}
            </div>
            <div class="col-md-3">
                <div class="card position-sticky" style="top: 4rem;">
                    <div class="card-body">
                        <h5 class="card-title">Categories</h5>
                        <ul class="list-group list-group-flush">
                            {% for category in categories %}
                                {% if category.name != 'Uncategorized' %}
                                    <li class="list-group-item"><a href="{% url 'category' pk=category.pk name=category.name|slugify %}">{{ category.name }}</a></li>
                                {% endif %}
                                {% empty %}
                                    <li class="list-group-item">No categories available</li>
                            {% endfor %}
                                <li class="list-group-item"><a href="{% url 'categories' %}">All categories</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>
{% endblock %}